{% extends 'dashboard/base.html' %}

{% block title %}Teste de Dados - Dashboard{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="text-white">üß™ TESTE DE DADOS INMET</h1>
    
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h2>üìä M√©tricas Testadas</h2>
                    
                    <ul>
                        <li><strong>Total de Relat√≥rios:</strong> {{ metricas.total_relatos }}</li>
                        <li><strong>Casos Cr√≠ticos:</strong> {{ metricas.relatos_criticos }}</li>
                        <li><strong>Casos Moderados:</strong> {{ metricas.relatos_moderados }}</li>
                        <li><strong>Casos Baixos:</strong> {{ metricas.relatos_baixos }}</li>
                        <li><strong>Usu√°rios Ativos:</strong> {{ metricas.usuarios_ativos }}</li>
                        <li><strong>Total Confirma√ß√µes:</strong> {{ metricas.total_confirmacoes }}</li>
                        <li><strong>Severidade M√©dia:</strong> {{ metricas.severidade_media|floatformat:2 }}</li>
                    </ul>
                    
                    <hr>
                    
                    <h3>üìã √öltimos Relat√≥rios</h3>
                    {% if relatos_recentes %}
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Bairro</th>
                                    <th>Cidade</th>
                                    <th>Severidade</th>
                                    <th>Confirma√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for relato in relatos_recentes %}
                                <tr>
                                    <td>{{ relato.timestamp|date:"d/m/Y H:i" }}</td>
                                    <td>{{ relato.bairro.nome }}</td>
                                    <td>{{ relato.bairro.cidade }}</td>
                                    <td>
                                        {% if relato.nivel_severidade == 1 %}üü¢ Baixo{% endif %}
                                        {% if relato.nivel_severidade == 2 %}üü° Moderado{% endif %}
                                        {% if relato.nivel_severidade == 3 %}üü† Alto{% endif %}
                                        {% if relato.nivel_severidade == 4 %}üî¥ Cr√≠tico{% endif %}
                                    </td>
                                    <td>{{ relato.total_confirmacoes }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <p class="text-danger">‚ùå Nenhum relat√≥rio encontrado!</p>
                    {% endif %}
                    
                    <hr>
                    
                    <h3>üèòÔ∏è Bairros Dispon√≠veis</h3>
                    {% if opcoes_filtros.bairros %}
                        <div class="row">
                            {% for bairro in opcoes_filtros.bairros %}
                            <div class="col-md-3 mb-2">
                                <span class="badge bg-primary">{{ bairro.nome }}, {{ bairro.cidade }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-warning">‚ö†Ô∏è Nenhum bairro encontrado!</p>
                    {% endif %}
                    
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}